//
//  MIT License
//
//  Copyright (c) 2021 GrowStocks
//
//  Permission is hereby granted, free of charge, to any person obtaining a copy
//  of this software and associated documentation files (the "Software"), to deal
//  in the Software without restriction, including without limitation the rights
//  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
//  copies of the Software, and to permit persons to whom the Software is
//  furnished to do so, subject to the following conditions:
//
//  The above copyright notice and this permission notice shall be included in all
//  copies or substantial portions of the Software.
//
//  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
//  SOFTWARE.
//

@use '../mixins';
@use '../Typography' as typography;

@mixin base(
    $padding,
    $spacer-ink
) {
    width: 100%;

    display: grid;
    grid-template-columns: 42px 1fr 42px;

    padding: $padding;

    background-color: var(--primary-light);

    &::after {
        content: "";
        clear: both;
        display: table;
    }

    .chip__sprite {

        $sprite-display: inline;
        $sprite-size: 32px;
        $sprite-margin: 3px 10px 7px 2px;
        $sprite-float: left;

        img {
            display: $sprite-display;
            width: $sprite-size;
            height: $sprite-size;
            margin: $sprite-margin;
            float: $sprite-float;
        }
    }

    $text-display: inline;

    .wrap--text {
        display: $text-display;
        width: 100% !important;

        * {
            display: $text-display;
            text-align: justify;
        }
    }

    $title-font-size: typography.px-to-rem(20px);
    $subtitle-font-size: typography.px-to-rem(14px);

    h2 {
        font-size: $title-font-size;
        padding: 0 !important;
        display: $text-display;
    }

    p {
        font-size: $subtitle-font-size;
        padding: 0 !important;
        display: $text-display;
    }

    a {
        display: $text-display;
    }

    .chip__arrow {
        width: 12px !important;
        height: auto !important;
        top: 2px;
        margin: 0 2px 0 1px !important;
    }

    .chip__spacer {
        margin: 0;
        font-weight: 700;
        color: $spacer-ink;
        font-size: $subtitle-font-size;
    }
}

@mixin render(
    $fill: var(--primary-light),
    $options-fill: var(--primary--variant-dark),
    $ink: var(--on-primary),
    $icon-ink: var(--on-primary),
    $spacer-ink: var(--surface),
    $border: none,
    $border-radius: 0.3rem,
    $padding: 10px,
    $shape: default,
    $clip-size: 0.5rem,
    $shape-exceptions: ()
) {
    .contain--item {
        height: max-content;
        @include mixins.shape($shape, $border-radius, $clip-size, $shape-exceptions);
        position: relative;
        overflow: hidden;

        .item__status__sym {
            display: inline !important;
            position: relative !important;
            top: 2px !important;
            right: 0 !important;
            font-size: 16px !important;
            font-weight: 400 !important;
        }

        .chip__options__trigger,
        .chip__modal__trigger {
            display: block;
            position: absolute;

            background-color: var(--transparent);
            color: $icon-ink;
            border: none;

            width: 32px;
            height: 32px;

            float: right;
            padding: 0;

            top: 4px;
            right: 7px;

            &:hover {
                cursor: pointer;
            }
        }
    }

    .chip {
        @include base($padding, $spacer-ink);
    }

    .chip--full {
        @include base($padding, $spacer-ink);
    }

    .chip__options {
        display: none;
        border: none;
        width: 100%;
        padding: 5px 10px;

        background-color: $options-fill;

        .chip__options__button {
            display: inline-block;
            border: none;
            font-size: typography.px-to-rem(13px) !important;

            @include mixins.prefix(transition, all 0.1s linear);

            &:hover {
                cursor: pointer;
                color: var(--secondary);
            }
        }

        .chip__options__spacer {
            color: $spacer-ink;
            font-size: typography.px-to-rem(13px);
            font-weight: 700;
        }
    }

    .close {
        content: "close" !important;
    }

    .chip__footer {
        $border-radius: 0 0 0.3rem 0.3rem;
        $font-size: 12px;
        $font-weight: 700;

        width: 100%;
        padding: 5px 10px 4px 10px !important;
        border-radius: $border-radius;
        font-size: $font-size !important;
        font-weight: $font-weight !important;
        color: #fff !important;

        &.stable {
            background-color: var(--success);
        }

        &.semi-stable {
            background-color: var(--warning);

            p {
                color: var(--on-secondary);
            }
        }

        &.unstable {
            background-color: var(--error);
        }

        &.undefined {
            background-color: var(--undefined);
        }

        @include mixins.rainbow-factory();

    }

    // LEGACY
    .wrap--market {
        .chip__options__button {
            display: inline-block;
            border: none;
            font-size: typography.px-to-rem(13px) !important;
            margin-right: 0 !important;

            &:hover {
                cursor: pointer;
            }
        }

        .chip {
            img {
                margin-bottom: 20px;
            }
        }
    }
}
